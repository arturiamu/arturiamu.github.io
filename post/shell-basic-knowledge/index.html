<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='shell基本知识、基础命令'>
<meta name="keywords" content="木林彪, arturiamu, 博客, 木林彪的个人博客, shell, shell基础"><title>shell脚本基础入门</title>

<link rel='canonical' href='https://arturiamu.github.io/post/shell-basic-knowledge/'>

<link rel="stylesheet" href="/scss/style.min.5e3814b8c20dd362819d8f0b1c0554df211090883babaeea35913b6b16121b26.css"><meta property='og:title' content='shell脚本基础入门'>
<meta property='og:description' content='shell基本知识、基础命令'>
<meta property='og:url' content='https://arturiamu.github.io/post/shell-basic-knowledge/'>
<meta property='og:site_name' content='木林彪的个人博客'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='shell' /><meta property='article:tag' content='bash' /><meta property='article:published_time' content='2023-09-27T14:10:12&#43;08:00'/><meta property='article:modified_time' content='2023-09-27T14:10:12&#43;08:00'/>
<meta name="twitter:site" content="@ArturiaMu">
    <meta name="twitter:creator" content="@ArturiaMu"><meta name="twitter:title" content="shell脚本基础入门">
<meta name="twitter:description" content="shell基本知识、基础命令">
    <link rel="shortcut icon" href="/favicon.ico" />

<script async src="https://www.googletagmanager.com/gtag/js?id=G-JJG6TYWNYX"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-JJG6TYWNYX', { 'anonymize_ip': false });
}
</script>
<style>
    :root {
         
        --sys-font-family: "HarmonyOS_Sans_SC_Medium", Georgia, -apple-system, 'Nimbus Roman No9 L', 'PingFang SC', 'Hiragino Sans GB', 'Noto Serif SC', 'Microsoft Yahei', 'WenQuanYi Micro Hei', 'ST Heiti', sans-serif;
        --code-font-family: "JetBrainsMono Regular", Menlo, Monaco, Consolas, "Courier New";
        --article-font-family: "HarmonyOS_Sans_SC_Medium", var(--base-font-family);
    }
</style>

<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://img.shimoko.com/fonts/font.css";
        customFont.type = "text/css";
        customFont.rel = "stylesheet";
        document.head.appendChild(customFont);
    }());
</script>

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "dark");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar1_hu67b097db30250ef6a2ed6dd217c7d0a7_22735_300x0_resize_q75_box.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">❤️</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">木林彪的个人博客</a></h1>
            <h2 class="site-description">~Coding my life~</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/arturiamu'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='mailto:arturiamumu@gmail.com'
                        target="_blank"
                        title="Gmail"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-gmail" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
    <path d="M16 20h3a1 1 0 0 0 1 -1v-14a1 1 0 0 0 -1 -1h-3v16z" />
    <path d="M5 20h3v-16h-3a1 1 0 0 0 -1 1v14a1 1 0 0 0 1 1z" />
    <path d="M16 4l-4 4l-4 -4" />
    <path d="M4 6.5l8 7.5l8 -7.5" />
</svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com/'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>链接</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        
        <li >
            <a href='/message/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-message-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M8 9h8" />
  <path d="M8 13h6" />
  <path d="M9 18h-3a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-3l-3 3l-3 -3z" />
</svg>



                
                <span>留言</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                <li id="i18n-switch">  
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" onchange="window.location.href = this.selectedOptions[0].value">
                        
                            <option value="https://arturiamu.github.io/" selected>中文</option>
                        
                            <option value="https://arturiamu.github.io/en/" >English</option>
                        
                            <option value="https://arturiamu.github.io/ja/" >日本</option>
                        
                    </select>
                </li>
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>暗色模式</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#shell-脚本基础入门">Shell 脚本基础入门</a>
      <ol>
        <li><a href="#bash注释">bash注释</a></li>
        <li><a href="#bash基本数据类型">bash基本数据类型</a></li>
        <li><a href="#bash字符串串联">bash字符串串联</a></li>
      </ol>
    </li>
    <li><a href="#命令基本知识">命令基本知识</a>
      <ol>
        <li><a href="#变量赋值和引用变量">变量赋值和引用变量</a></li>
        <li><a href="#变量替换">变量替换</a></li>
        <li><a href="#命令替换">命令替换</a></li>
        <li><a href="#算术运算">算术运算</a></li>
        <li><a href="#退出状态码">退出状态码</a></li>
        <li><a href="#exit命令">exit命令</a></li>
        <li><a href="#后台执行命令-">后台执行命令 &amp;</a></li>
        <li><a href="#多命令组合">多命令组合</a></li>
        <li><a href="#基本重定向">基本重定向</a>
          <ol>
            <li><a href="#区分-cat-file-和-cat-file">区分 cat &lt;file 和 cat file</a></li>
            <li><a href="#here-doc">here doc</a></li>
            <li><a href="#here-string">here string</a></li>
          </ol>
        </li>
        <li><a href="#管道">管道</a></li>
        <li><a href="#tee命令">tee命令</a></li>
        <li><a href="#进程替换">进程替换</a></li>
        <li><a href="#条件测试语句">条件测试语句</a>
          <ol>
            <li><a href="#无测试内容">无测试内容</a></li>
            <li><a href="#true和false命令">true和false命令</a></li>
            <li><a href="#文件类测试">文件类测试</a></li>
            <li><a href="#文件属性类测试">文件属性类测试</a></li>
            <li><a href="#两文件之间的比较">两文件之间的比较</a></li>
            <li><a href="#数值大小比较">数值大小比较</a></li>
            <li><a href="#字符串比较">字符串比较</a></li>
            <li><a href="#逻辑运算符">逻辑运算符</a></li>
          </ol>
        </li>
        <li><a href="#if语句">if语句</a></li>
        <li><a href="#case语句">case语句</a></li>
        <li><a href="#for循环">for循环</a></li>
        <li><a href="#while循环">while循环</a></li>
        <li><a href="#shell函数">shell函数</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
            
                <section class="widget tagCloud">
    <div class="widget-icon">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11 3L20 12a1.5 1.5 0 0 1 0 2L14 20a1.5 1.5 0 0 1 -2 0L3 11v-4a4 4 0 0 1 4 -4h4" />
  <circle cx="9" cy="9" r="2" />
</svg>



    </div>
    <h2 class="widget-title section-title">标签云</h2>

    <div class="tagCloud-tags">
        
            <a href="/tags/bitcoin/" class="font_size_4">
                Bitcoin
            </a>
        
            <a href="/tags/ethereum/" class="font_size_4">
                Ethereum
            </a>
        
            <a href="/tags/bash/" class="font_size_3">
                bash
            </a>
        
            <a href="/tags/docker/" class="font_size_3">
                docker
            </a>
        
            <a href="/tags/mysql/" class="font_size_3">
                mysql
            </a>
        
            <a href="/tags/python/" class="font_size_3">
                python
            </a>
        
            <a href="/tags/shell/" class="font_size_3">
                shell
            </a>
        
            <a href="/tags/bug/" class="font_size_2">
                bug
            </a>
        
            <a href="/tags/golang/" class="font_size_2">
                golang
            </a>
        
            <a href="/tags/blog/" class="font_size_1">
                blog
            </a>
        
    </div>
</section>
            
        
        <div style="height: 30%;width: 30%">
            <script type="text/javascript" id="clstr_globe" src="//clustrmaps.com/globe.js?d=4gAmsOskyL921TwxZGdrq3NbkFu-hJm8dDfoHJsn25Q"></script>
        </div>
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/archives/linux/" >
                Linux
            </a>
        
            <a href="/archives/repost/" >
                转载
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/post/shell-basic-knowledge/">shell脚本基础入门</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            shell基本知识、基础命令
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2023-09-27 14:10:12 CST</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 16 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p><strong>本文转载自 <a class="link" href="https://www.junmajinlong.com/shell/script_course/shell_tutorial/"  target="_blank" rel="noopener"
    >Shell 脚本深入教程：快速入门</a></strong></p>
<h2 id="shell-脚本基础入门">Shell 脚本基础入门</h2>
<h3 id="bash注释">bash注释</h3>
<p>Bash 只支持单行注释，使用<code>#</code>开头的都被当作注释语句：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 整行注释</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> hello world <span class="c1"># 行尾注释</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>通过 Bash 的一些特性，可以取巧实现多行注释：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">: <span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">注释1
</span></span></span><span class="line"><span class="cl"><span class="s1">注释2
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">: <span class="s">&lt;&lt;&#39;EOF&#39;
</span></span></span><span class="line"><span class="cl"><span class="s">注释1
</span></span></span><span class="line"><span class="cl"><span class="s">注释2
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">____</span><span class="o">=</span><span class="s1">&#39;
</span></span></span><span class="line"><span class="cl"><span class="s1">注释1
</span></span></span><span class="line"><span class="cl"><span class="s1">注释2
</span></span></span><span class="line"><span class="cl"><span class="s1">&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>但是，别闲的蛋疼去用取巧的多行注释，安心用<code>#</code>来注释。</p>
<h3 id="bash基本数据类型">bash基本数据类型</h3>
<p>Bash 中基本数据类型只有字符串类型，连数值类型都没有 (<code>declare -i</code> 可强制声明数值类型)。</p>
<p>比如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 都会当作字符串</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> haha
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="m">1234</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="bash字符串串联">bash字符串串联</h3>
<p>Bash 中字符串的串联操作，直接将两段数据连接在一起即可，不需要任何操作符。</p>
<p>例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;arturia&#34;&#34;mu&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="m">1234</span> <span class="m">5678</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="命令基本知识">命令基本知识</h2>
<h3 id="变量赋值和引用变量">变量赋值和引用变量</h3>
<p><strong>等号左右不能有空格</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="m">3</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$a</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="s2">&#34;www.junmajinlong.com&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$a</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="s1">&#39;hello world&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$a</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Shell 中可以引用未定义的变量：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$xyzdefabc</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>可以定义空变量：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$a</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="变量替换">变量替换</h3>
<p>变量替换是指在命令开始执行前，Shell 会先将变量的值替换到引用变量的位置处。</p>
<p>例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="s2">&#34;hello&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$a</span> world
</span></span></code></pre></td></tr></table>
</div>
</div><p>在 echo 命令开始执行前，Shell 会取得变量 a 的值 hello，并将它替换到命令行的 $a 处。于是，在 echo 命令开始执行时，命令行已经变成：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> hello world
</span></span></code></pre></td></tr></table>
</div>
</div><p>除了变量替换，Shell 还会做其它替换：</p>
<ul>
<li>命令替换</li>
<li>进程替换</li>
<li>算术运算替换</li>
<li>大括号扩展</li>
<li>波浪号扩展</li>
<li>路径扩展</li>
</ul>
<p>这些扩展和替换，都是 Shell 在调用命令之前就完成的，这和其它语言解析代码的方式不一样。</p>
<p>后面会详细解释 Shell 是如何做命令行解析的，如果不掌握命令行解析，当遇到命令行语法错误后很可能会花掉大量无谓的时间去调试命令。而掌握命令行解析后，
就会对命令生命周期了如执掌，不敢说一次就能写对所有命令行，但能节省大量调试时间，对写命令行和写脚本的能力也会上升一个层次。</p>
<h3 id="命令替换">命令替换</h3>
<p>使用反引号或 <code>$()</code> 可以执行命令替换。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="sb">`</span>cmd<span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="k">$(</span>cmd<span class="k">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>命令替换是指先执行 cmd，将 cmd 的输出结果替换到 <code>$()</code> 或反引号位置处。</p>
<p>例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="sb">`</span>id root<span class="sb">`</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="k">$(</span>id root<span class="k">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>在 echo 命令执行前，会先执行 id 命令，id 命令的执行结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ id root
</span></span><span class="line"><span class="cl"><span class="nv">uid</span><span class="o">=</span>0<span class="o">(</span>root<span class="o">)</span> <span class="nv">gid</span><span class="o">=</span>0<span class="o">(</span>root<span class="o">)</span> <span class="nv">groups</span><span class="o">=</span>0<span class="o">(</span>root<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>所以会将结果 <code>uid=0(root) gid=0(root) groups=0(root)</code> 替换 <code>$(id root)</code>。于是，echo 命令开始执行时，命令行已经变成了：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">uid</span><span class="o">=</span>0<span class="o">(</span>root<span class="o">)</span> <span class="nv">gid</span><span class="o">=</span>0<span class="o">(</span>root<span class="o">)</span> <span class="nv">groups</span><span class="o">=</span>0<span class="o">(</span>root<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="算术运算">算术运算</h3>
<p><code>$[]</code> 或 <code>$(())</code> 或 let 命令可以做算术运算。</p>
<p>let 是单独的命令，不能写在其它命令行中。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="m">3</span>
</span></span><span class="line"><span class="cl"><span class="nb">let</span> <span class="nv">a</span><span class="o">=</span>a+1
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$a</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>$[]</code> 和 <code>$(())</code> 可以写在命令行内部，Shell 在解析命令行的时候，会对它们做算术运算，然后将运算结果替换到命令行中。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="m">33</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> $<span class="o">[</span>a+3<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="k">$((</span>a+3<span class="k">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>因为变量替换先于算术替换，所以，使用变量名或引用变量的方式都可以：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="m">333</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> $<span class="o">[</span><span class="nv">$a</span>+3<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="k">$((</span><span class="nv">$a</span><span class="o">+</span><span class="m">3</span><span class="k">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="退出状态码">退出状态码</h3>
<p>每个命令执行后都会有对应的进程退出状态码，用来表示该进程是否是正常退出。</p>
<p>所以，在命令行中，在 Shell 脚本中，经常会使用特殊变量 <code>$?</code> 判断最近一个前台命令是否正常退出。</p>
<p>通常情况下，如果 <code>$?</code> 的值：</p>
<ul>
<li>为 0，表示进程成功执行，即正常退出</li>
<li>非 0，表示进程未成功执行，即非正常退出</li>
<li>但非 0 退出状态码并不一定表示错误，也可能是正常逻辑的退出</li>
</ul>
<p>另外，在 Shell 脚本中，所有条件判断 (比如 if 语句、while 语句) 都以 0 退出状态码表示 True，以非 0 退出状态码为 False。</p>
<h3 id="exit命令">exit命令</h3>
<p>exit 命令可用于退出当前 Shell 进程，比如退出当前 Shell 终端、退出 Shell 脚本，等等。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">exit</span> <span class="o">[</span>N<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>exit 可指定退出状态码 N，如果省略 N，则默认退出状态码为 0，即表示正确退出。</p>
<h3 id="后台执行命令-">后台执行命令 &amp;</h3>
<p>在命令的结尾使用 <code>&amp;</code> 符号，可以将这个命令放入后台执行。</p>
<p>命令放入后台后，会立即回到 Shell 进程，Shell 进程会立即执行下一条命令 (如果有) 或退出。</p>
<p>使用 <code>$!</code> 可以获取最近一个后台进程的 PID。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sleep <span class="m">20</span> <span class="p">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$!</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>使用 <code>wait</code> 命令可以等待后台进程 (当前 Shell 进程的子进程) 完成：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">wait</span> <span class="o">[</span>n1 n2 n3 ...<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>不给定任何参数时，会等待所有子进程 (即所有后台进程) 完成。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">sleep <span class="m">5</span> <span class="p">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="nb">wait</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> haha
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="多命令组合">多命令组合</h3>
<p>Shell 中有多种组合多个命令的方式。</p>
<p>1.cmd1 退出后，执行 cmd2</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cmd1<span class="p">;</span>cmd2
</span></span></code></pre></td></tr></table>
</div>
</div><p>2.cmd1 正确退出 (退出状态码为 0) 后，执行 cmd2</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cmd1 <span class="o">&amp;&amp;</span> cmd2
</span></span></code></pre></td></tr></table>
</div>
</div><p>3.cmd1 不正确退出后，执行 cmd2</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cmd1 <span class="o">||</span> cmd2
</span></span></code></pre></td></tr></table>
</div>
</div><p>4.逻辑结合：<code>&amp;&amp;</code> 和 <code>||</code> 可以随意结合</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># cmd1正确退出后执行cmd2，cmd2正确退出后执行cmd3</span>
</span></span><span class="line"><span class="cl">cmd1 <span class="o">&amp;&amp;</span> cmd2 <span class="o">&amp;&amp;</span> cmd3...
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># cmd1正确退出则执行cmd2，cmd1不正确退出会执行cmd3</span>
</span></span><span class="line"><span class="cl"><span class="c1"># cmd1正确退出，但cmd2不正确退出，也会执行cmd3</span>
</span></span><span class="line"><span class="cl">cmd1 <span class="o">&amp;&amp;</span> cmd2 <span class="o">||</span> cmd3
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># cmd1正确退出会执行cmd3</span>
</span></span><span class="line"><span class="cl"><span class="c1"># cmd1不正确退出会执行cmd2，cmd2正确退出会执行cmd3</span>
</span></span><span class="line"><span class="cl">cmd1 <span class="o">||</span> cmd2 <span class="o">&amp;&amp;</span> cmd3
</span></span></code></pre></td></tr></table>
</div>
</div><p>5.将多个命令分组：小括号或大括号可以组合多个命令</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 小括号组合的多个命令是在子Shell中执行</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 即会先创建一个新的Shell进程，在执行里面的命令</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>cmd1<span class="p">;</span>cmd2<span class="p">;</span>cmd3<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 大括号组合的多个命令是在当前Shell中执行</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 大括号语法特殊，要求：</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   1.开闭括号旁边都有空白，否则语法解析错误(解析成大括号扩展)</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   2.写在同一行时，每个cmd后都要加分号结尾</span>
</span></span><span class="line"><span class="cl"><span class="c1">#   3.多个命令可分行书写，不要求分号结尾</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span> cmd1<span class="p">;</span>cmd2<span class="p">;</span>cmd3<span class="p">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span>
</span></span><span class="line"><span class="cl">  cmd1
</span></span><span class="line"><span class="cl">  cmd2
</span></span><span class="line"><span class="cl">  cmd3
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="基本重定向">基本重定向</h3>
<p>软件设计认为，程序应该有一个数据来源、数据出口和报告错误的地方。在 Linux 系统中，每个程序默认都会打开三个文件描述符 (file descriptor,fd)：</p>
<ul>
<li>fd=0：标准输入，表示程序默认从哪里读取数据</li>
<li>fd=1：标准输出，表示程序默认将数据输出到哪里</li>
<li>fd=2：标准错误，表示程序默认将错误信息输出到哪里</li>
</ul>
<p>文件描述符，说白了就是系统为了跟踪打开的文件而分配给它的一个数字，这个数字和文件有对应关系：从文件描述符读取数据，即表示从对应的文件中读取数据，
向文件描述符写数据，即表示向对应文件中写入数据。</p>
<p>Linux 中万物皆文件，文件描述符也是文件。默认：</p>
<ul>
<li>fd=0 的标准输入是 /dev/stdin 文件</li>
<li>fd=1 的标准输出是 /dev/stdout 文件</li>
<li>fd=2 的标准错误是 /dev/stderr 文件</li>
</ul>
<p>这些文件默认又是各个终端的软链接文件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ ls -l /dev/std*
</span></span><span class="line"><span class="cl">lrwxrwxrwx <span class="m">1</span> root root <span class="m">15</span> Jan  <span class="m">8</span> 20:26 /dev/stderr -&gt; /proc/self/fd/2
</span></span><span class="line"><span class="cl">lrwxrwxrwx <span class="m">1</span> root root <span class="m">15</span> Jan  <span class="m">8</span> 20:26 /dev/stdin -&gt; /proc/self/fd/0
</span></span><span class="line"><span class="cl">lrwxrwxrwx <span class="m">1</span> root root <span class="m">15</span> Jan  <span class="m">8</span> 20:26 /dev/stdout -&gt; /proc/self/fd/1
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ ls -l /proc/self/fd/
</span></span><span class="line"><span class="cl">lrwx------ <span class="m">1</span> root root <span class="m">64</span> Jan <span class="m">16</span> 10:40 <span class="m">0</span> -&gt; /dev/pts/0
</span></span><span class="line"><span class="cl">lrwx------ <span class="m">1</span> root root <span class="m">64</span> Jan <span class="m">16</span> 10:40 <span class="m">1</span> -&gt; /dev/pts/0
</span></span><span class="line"><span class="cl">lrwx------ <span class="m">1</span> root root <span class="m">64</span> Jan <span class="m">16</span> 10:40 <span class="m">2</span> -&gt; /dev/pts/0
</span></span><span class="line"><span class="cl">lr-x------ <span class="m">1</span> root root <span class="m">64</span> Jan <span class="m">16</span> 10:40 <span class="m">3</span> -&gt; /proc/75220/fd
</span></span></code></pre></td></tr></table>
</div>
</div><p>所以，默认情况下读写数据都是终端，例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 数据输出到终端</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> haha
</span></span><span class="line"><span class="cl">$ cat /etc/fstab
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 从终端读取数据</span>
</span></span><span class="line"><span class="cl">$ cat
</span></span><span class="line"><span class="cl">hello   <span class="c1"># 在终端输入</span>
</span></span><span class="line"><span class="cl">hello   <span class="c1"># 在终端输出</span>
</span></span><span class="line"><span class="cl">world   <span class="c1"># 在终端输入</span>
</span></span><span class="line"><span class="cl">world   <span class="c1"># 在终端输出</span>
</span></span><span class="line"><span class="cl">^C
</span></span></code></pre></td></tr></table>
</div>
</div><p>改变文件描述符对应的目标，可以改变数据的流向。比如标准输出 fd=1 默认流向是终端设备，若将其改为 /tmp/a.log，便能让数据写入 /tmp/a.log 文件中而不再是终端设备中。</p>
<p>在 Shell 中，这种改变文件描述符目标的行为称为<strong>重定向</strong>，即重新确定数据的流向。</p>
<p>其实，文件描述符有很多类操作，包括 fd 的重定向、fd 的分配 (open，即打开文件)、fd 复制 (duplicate)、fd 的移动 (move)、fd 的关闭 (close)。现在只介绍基础重定向操作。</p>
<p>Shell 中，基础重定向操作有以下几种方式：</p>
<ul>
<li>[n]&gt;file：覆盖式输出重定向，输出到 fd=n 的数据改变流向输出到 file 文件中，file 不存在则创建，file 存在则先清空再写入数据
<ul>
<li>省略 n 时 &gt;file，等价于 1&gt;file，即标准输出覆盖重定向到 file 文件中</li>
</ul>
</li>
<li>[n]&gt;&gt;file：追加式输出重定向，输出到 fd=n 的数据改变流向输出到 file 文件的尾部，file 不存在则创建，file 存在则直接追加在文件尾部
<ul>
<li>省略 n 时 &raquo;file，等价于 1&raquo;file，即标准输出追加重定向到 file 文件中</li>
</ul>
</li>
<li>[n]&lt;file：输入重定向，以读取模式打开 file 文件并分配 fd=n，file 不存在则报错
<ul>
<li>省略 n 时 &lt;file，等价于 0&lt;file，即直接从 file 中读数据</li>
<li>通常程序都只从 fd=0 中读数据，所以当 n 不等于 0 时，需要多做一步操作 3&lt;file &lt;&amp;3，看不懂先跳过</li>
</ul>
</li>
<li>&amp;&gt;file：这是特殊的重定向方式，表示将标准错误和标准输出都重定向到 file 文件中，等价于 &gt;file 2&gt;&amp;1</li>
<li>&amp;&gt;&gt;file：这是特殊的重定向方式，表示将标准错误和标准输出都追加到 file 文件中，等价于 &raquo;file 2&gt;&amp;1</li>
</ul>
<p>另外，经常用于输出的一个特殊目标文件是 /dev/null，它是空设备，可以直接丢掉所有写入它的数据。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">echo</span> blog.mulinbiao.com &gt;/dev/null
</span></span><span class="line"><span class="cl">curl -I blog.mulinbiao.com 2&gt;/dev/null &gt;/tmp/a.log
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cat &lt;/etc/fstab
</span></span></code></pre></td></tr></table>
</div>
</div><p>一个经常用的技巧是清空文件的方式：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ cat /dev/null &gt;file
</span></span><span class="line"><span class="cl">$ &gt;file
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="区分-cat-file-和-cat-file">区分 cat &lt;file 和 cat file</h4>
<p>cat 是一个命令，这个命令的源代码中写了一些代码用来处理选项和参数。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cat -n /etc/fstab
</span></span></code></pre></td></tr></table>
</div>
</div><p>cat 命令开始执行后，会识别 <code>-n</code> 选项，该选项会让 cat 输出时同时输出行号，cat 同时还会识别 <code>/etc/fstab</code> 参数，cat 会读取参数指定的文件然后输出。</p>
<p>如果没有指定 cat 的文件参数，则 cat 默认会从标准输入中读取数据。默认的标准输入是终端，所以在没有改变标准输入的流向时，会从终端读取数据，
也就是用户输入什么字符，就读取什么字符，然后输出什么字符：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ cat
</span></span><span class="line"><span class="cl">arturia   <span class="c1"># 在终端输入</span>
</span></span><span class="line"><span class="cl">arturia   <span class="c1"># 在终端输出</span>
</span></span><span class="line"><span class="cl">mu   <span class="c1"># 在终端输入</span>
</span></span><span class="line"><span class="cl">mu   <span class="c1"># 在终端输出</span>
</span></span><span class="line"><span class="cl">^C
</span></span></code></pre></td></tr></table>
</div>
</div><p>但用户可以改变标准输入的来源。比如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ cat &lt;/etc/fstab
</span></span></code></pre></td></tr></table>
</div>
</div><p>表示将标准输入来源改为 /etc/fstab 文件，于是 cat 会从 /etc/fstab 中读取数据。</p>
<p>另外，约定俗成的，会使用一个 <code>-</code> 来表示标准输入或标准输出。</p>
<p>注：这并非是一贯正确的，只是约定俗成的大多数程序的代码中都定义了 - 相关的代码处理。可参考相关命令的 man 手册。如 man cat 中有一行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">With no FILE, or when FILE is -, <span class="nb">read</span> standard input.
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="here-doc">here doc</h4>
<p>输入重定向是 <code>&lt;</code>，除此之外还有 <code>&lt;&lt;</code>、<code>&lt;&lt;&lt;</code>。</p>
<p><code>&lt;&lt;</code> 符号表示 here doc。也就是说，它后面跟的是一篇文档，就像一个文件一样，只不过这个文件的内容是临时定义在 <code>&lt;&lt;</code> 符号后的。here doc 常用于指定多行数据输入。</p>
<p>既然是文档，就有文档起始符号表示文档从此开始和文档终止符号表示文档到此结束。起始符和终止符中间的内容全部是文档内容。文档内容会作为标准输入的数据被读取。</p>
<p>文档的起始符和终止符可以随意定义，但两者前后必须一样。常见的符号是：</p>
<ul>
<li>EOF：end of file</li>
<li>EOL：end of line</li>
<li>EOB：end of block</li>
</ul>
<p>例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># here doc作为标准输入被读取，然后被cat输出</span>
</span></span><span class="line"><span class="cl">cat <span class="s">&lt;&lt;EOF
</span></span></span><span class="line"><span class="cl"><span class="s">hello
</span></span></span><span class="line"><span class="cl"><span class="s">world
</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># here doc的内容还会被cat覆盖式输出到指定文件</span>
</span></span><span class="line"><span class="cl">cat <span class="s">&lt;&lt;eof &gt;/tmp/file
</span></span></span><span class="line"><span class="cl"><span class="s">hello
</span></span></span><span class="line"><span class="cl"><span class="s">world
</span></span></span><span class="line"><span class="cl"><span class="s">eof</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># here doc的内容还会被cat追加式输出到指定文件</span>
</span></span><span class="line"><span class="cl">cat <span class="s">&lt;&lt;eof &gt;&gt;/tmp/file
</span></span></span><span class="line"><span class="cl"><span class="s">hello
</span></span></span><span class="line"><span class="cl"><span class="s">world
</span></span></span><span class="line"><span class="cl"><span class="s">eof</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># here doc和重定向符号的前后位置随意</span>
</span></span><span class="line"><span class="cl">cat &gt;&gt;/tmp/file<span class="s">&lt;&lt;eof
</span></span></span><span class="line"><span class="cl"><span class="s">...
</span></span></span><span class="line"><span class="cl"><span class="s">eof</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>另外，如果将起始符用引号包围，则不会进行变量替换、命令替换、算术替换等。如果不用引号包围起始符，则会进行替换。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">a</span><span class="o">=</span><span class="m">333</span>
</span></span><span class="line"><span class="cl">cat <span class="s">&lt;&lt;eof
</span></span></span><span class="line"><span class="cl"><span class="s">$a
</span></span></span><span class="line"><span class="cl"><span class="s">eof</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cat &lt;&lt;<span class="s2">&#34;eof&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$a</span>
</span></span><span class="line"><span class="cl">eof
</span></span></code></pre></td></tr></table>
</div>
</div><p>输出结果：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="m">333</span>
</span></span><span class="line"><span class="cl"><span class="nv">$a</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="here-string">here string</h4>
<p><code>&lt;&lt;&lt;</code> 表示 here string。也就是说该符号后面是一个字符串，这个字符串会作为标准输入的内容。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cat <span class="o">&lt;&lt;&lt;</span><span class="s2">&#34;blog.mulinbiao.com&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>使用单引号包围 here string 时，不会进行变量替换、命令替换等，使用双引号包围时会进行替换。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ <span class="nv">a</span><span class="o">=</span><span class="m">3333</span>
</span></span><span class="line"><span class="cl">$ cat <span class="o">&lt;&lt;&lt;</span><span class="nv">$a</span>            
</span></span><span class="line"><span class="cl"><span class="m">3333</span>
</span></span><span class="line"><span class="cl">$ cat <span class="o">&lt;&lt;&lt;</span><span class="s2">&#34;hello world</span><span class="nv">$a</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">hello world3333
</span></span><span class="line"><span class="cl">$ cat <span class="o">&lt;&lt;&lt;</span><span class="s1">&#39;hello world$a&#39;</span> 
</span></span><span class="line"><span class="cl">hello world<span class="nv">$a</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>here string 常可以替代管道前的 echo 命令 <code>echo xxx|</code>。例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 下面是等价的</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> hello world <span class="p">|</span> grep <span class="s2">&#34;llo&#34;</span>
</span></span><span class="line"><span class="cl">grep <span class="s2">&#34;llo&#34;</span> <span class="o">&lt;&lt;&lt;</span><span class="s2">&#34;hello world&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="管道">管道</h3>
<p>管道的用法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cmd1 <span class="p">|</span> cmd2 <span class="p">|</span> cmd3...
</span></span></code></pre></td></tr></table>
</div>
</div><p>每个竖线代表一个管道。上面命令行表示 cmd1 的标准输出会放进管道，cmd2 会从管道中读取进行处理，cmd2 的标准输出会放入另一个管道，cmd3 会从这个管道中读取数据进行处理。后面还可以接任意数量的管道。</p>
<p>Shell 管道是 Shell 中最值得称赞的功能之一，它以非常简洁的形式实现了管道的进程间通信方式，我个人认为 Shell 处理文本数据的半壁江山都来自于竖线形式的管道。像其它编程语言，打开管道后还要区分哪个进程写管道、哪个进程读管道，为了安全，每个进程还要关闭不用的读端或写端，总之就是麻烦，而 Shell 的管道非常简洁，竖线左边的就是写管道的，竖线右边的就是读管道的。</p>
<p>例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ps aux <span class="p">|</span> grep <span class="s1">&#39;sshd&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ps 命令产生的数据 (标准输出) 会写进管道，只要管道内一有数据，grep 命令就从中读取数据进行处理。</p>
<p>那下面的命令中，grep 从哪读数据呢？</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ps aux <span class="p">|</span> grep <span class="s1">&#39;#&#39;</span> /etc/fstab
</span></span></code></pre></td></tr></table>
</div>
</div><p>那想要让 grep 既从 /etc/fstab 读取数据，也从管道中读取数据呢？</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">ps aux <span class="p">|</span> grep <span class="s1">&#39;#&#39;</span> /etc/fstab /dev/stdin
</span></span><span class="line"><span class="cl">ps aux <span class="p">|</span> grep <span class="s1">&#39;#&#39;</span> /etc/fstab -
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="tee命令">tee命令</h3>
<p>tee 命令可将一份标准输入原样拷贝到标准输出和 0 或多个文件中。换句话说，tee 的作用是数据多重定向。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">NAME
</span></span><span class="line"><span class="cl">    tee - <span class="nb">read</span> from standard input and write to standard output and files
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">SYNOPSIS
</span></span><span class="line"><span class="cl">    tee <span class="o">[</span>OPTION<span class="o">]</span>... <span class="o">[</span>FILE<span class="o">]</span>...
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">DESCRIPTION
</span></span><span class="line"><span class="cl">    Copy standard input to each FILE, and also to standard output.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    -a, --append
</span></span><span class="line"><span class="cl">        ppend to the given FILEs, <span class="k">do</span> not overwrite
</span></span></code></pre></td></tr></table>
</div>
</div><p>如图：</p>
<p><img src="/post/shell-basic-knowledge/img.png"
	width="598"
	height="334"
	srcset="/post/shell-basic-knowledge/img_huf97eea9102f89c4d6ebe0a65298112aa_12695_480x0_resize_box_3.png 480w, /post/shell-basic-knowledge/img_huf97eea9102f89c4d6ebe0a65298112aa_12695_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="img.png"
	
	
		class="gallery-image" 
		data-flex-grow="179"
		data-flex-basis="429px"
	
></p>
<p>例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ <span class="nb">echo</span> hello world <span class="p">|</span> tee /tmp/file1 /tmp/file2 <span class="p">|</span> cat
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> hello world <span class="p">|</span> tee -a /tmp/file3 &gt;/dev/null
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="进程替换">进程替换</h3>
<p>Bash 还支持进程替换 (注：有些 Shell 不支持进程替换)。</p>
<p>进程替换的语法：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">&lt;<span class="o">(</span>cmd<span class="o">)</span>
</span></span><span class="line"><span class="cl">&gt;<span class="o">(</span>cmd<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>进程替换和命令替换类似，都是让 cmd 命令先执行，因为它们都是在 Shell 解析命令行的阶段执行的。</p>
<p>进程替换先让 cmd 放入后台异步执行，并且不会等待 cmd 执行完。</p>
<p>其实，每个进程替换都是一个虚拟文件，只不过这个文件的内容是由 cmd 命令产生的 <code>(&lt;(cmd))</code> 或被 cmd 命令读取的 <code>(&gt;(cmd))</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ <span class="nb">echo</span> &lt;<span class="o">(</span><span class="nb">echo</span> blog.mulinbiao.com<span class="o">)</span>
</span></span><span class="line"><span class="cl">/dev/fd/63
</span></span></code></pre></td></tr></table>
</div>
</div><p>既然进程替换是文件，那么它就可以像文件一样被操作。比如被读取、被当作标准输入重定向的数据源等等：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># cmd做数据产生者</span>
</span></span><span class="line"><span class="cl">$ cat &lt;<span class="o">(</span><span class="nb">echo</span> blog.mulinbiao.com<span class="o">)</span>   <span class="c1"># 等价于cat /dev/fd/63</span>
</span></span><span class="line"><span class="cl">$ cat &lt; &lt;<span class="o">(</span><span class="nb">echo</span> blog.mulinbiao.com<span class="o">)</span> <span class="c1"># 等价于cat &lt;/dev/fd/63</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># cmd做数据接收者</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> hello world &gt; &gt;<span class="o">(</span>grep <span class="s1">&#39;llo&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> hello world <span class="p">|</span> tee &gt;<span class="o">(</span>grep <span class="s1">&#39;llo&#39;</span><span class="o">)</span> &gt;<span class="o">(</span>grep <span class="s1">&#39;rld&#39;</span><span class="o">)</span> &gt;/dev/null
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="条件测试语句">条件测试语句</h3>
<p>test 命令或功能等价的 Bash 内置命令 <code>[ ]</code> 可以做条件测试，如果测试的结果为 True，则退出状态码为 0。</p>
<p>此外，还可以使用 <code>[[]]</code> 来做条件测试，甚至 <code>let、$[]、$(())</code> 也可以做条件测试，但这里暂不介绍。</p>
<p>这些条件测试常用在 if、while 语句中，也常用在 <code>cmd1 &amp;&amp; cmd2 || cmd3</code> 格式的命令行中。</p>
<p>用法示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">sh_file</span><span class="o">=</span>test.sh
</span></span><span class="line"><span class="cl"><span class="o">[</span> -x <span class="s2">&#34;</span><span class="nv">$sh_file</span><span class="s2">&#34;</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> ./<span class="nv">$sh_file</span> <span class="o">||</span> <span class="o">{</span> <span class="nb">echo</span> <span class="s2">&#34;can&#39;t execute,exit...&#34;</span><span class="p">;</span><span class="nb">exit</span> 1<span class="p">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">test</span> -x <span class="s2">&#34;</span><span class="nv">$sh_file</span><span class="s2">&#34;</span> <span class="o">&amp;&amp;</span> ./<span class="nv">$sh_file</span> <span class="o">||</span> <span class="o">{</span> <span class="nb">echo</span> <span class="s2">&#34;can&#39;t execute,exit...&#34;</span><span class="p">;</span><span class="nb">exit</span> 1<span class="p">;</span> <span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>[]</code> 中的条件测试表达式需要和开闭中括号使用空格隔开，否则语法解析错误。</p>
<h4 id="无测试内容">无测试内容</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>  <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nb">test</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>没有任何测试内容时，直接返回 false。</p>
<h4 id="true和false命令">true和false命令</h4>
<p>true 命令直接返回 true，即退出状态码为 0。</p>
<p>false 命令直接返回 false，即退出状态码非 0。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ <span class="nb">true</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="nv">$?</span>  <span class="c1"># 0</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">false</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">echo</span> <span class="nv">$?</span>  <span class="c1"># 1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="文件类测试">文件类测试</h4>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>条件表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-e file</td>
<td>文件是否存在 (exist)</td>
</tr>
<tr>
<td>-f file</td>
<td>文件是否存在且为普通文件 (file)</td>
</tr>
<tr>
<td>-d file</td>
<td>文件是否存在且为目录 (directory)</td>
</tr>
<tr>
<td>-b file</td>
<td>文件是否存在且为块设备 block device</td>
</tr>
<tr>
<td>-c file</td>
<td>文件是否存在且为字符设备 character device</td>
</tr>
<tr>
<td>-S file</td>
<td>文件是否存在且为套接字文件 Socket</td>
</tr>
<tr>
<td>-p file</td>
<td>文件是否存在且为命名管道文件 FIFO (pipe)</td>
</tr>
<tr>
<td>-L file</td>
<td>文件是否存在且是一个链接文件 (Link)</td>
</tr>
</tbody>
</table></div>
<h4 id="文件属性类测试">文件属性类测试</h4>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>条件表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-r file</td>
<td>文件是否存在且当前用户可读</td>
</tr>
<tr>
<td>-w file</td>
<td>文件是否存在且当前用户可写</td>
</tr>
<tr>
<td>-x file</td>
<td>文件是否存在且当前用户可执行</td>
</tr>
<tr>
<td>-s file</td>
<td>文件是否存在且大小大于 0 字节，即检测文件是否非空文件</td>
</tr>
<tr>
<td>-N file</td>
<td>文件是否存在，且自上次 read 后是否被 modify</td>
</tr>
</tbody>
</table></div>
<h4 id="两文件之间的比较">两文件之间的比较</h4>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>条件表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>file1 -nt file2</td>
<td>(newer than) 判断 file1 是否比 file2 新</td>
</tr>
<tr>
<td>file1 -ot file2</td>
<td>(older than) 判断 file1 是否比 file2 旧</td>
</tr>
<tr>
<td>file1 -ef file2</td>
<td>(equal file) 判断 file1 与 file2 是否为同一文件</td>
</tr>
</tbody>
</table></div>
<h4 id="数值大小比较">数值大小比较</h4>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>条件表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>int1 -eq int2</td>
<td>两数值相等 (equal)</td>
</tr>
<tr>
<td>int1 -ne int2</td>
<td>两数值不相等 (not equal)</td>
</tr>
<tr>
<td>int1 -gt int2</td>
<td>n1 大于 n2 (greater than)</td>
</tr>
<tr>
<td>int1 -lt int2</td>
<td>n1 小于 n2 (less than)</td>
</tr>
<tr>
<td>int1 -ge int2</td>
<td>n1 大于等于 n2 (greater than or equal)</td>
</tr>
<tr>
<td>int1 -le int2</td>
<td>n1 小于等于 n2 (less than or equal)</td>
</tr>
</tbody>
</table></div>
<h4 id="字符串比较">字符串比较</h4>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>条件表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-z str</td>
<td>(zero) 判定字符串是否为空？str 为空串，则 true</td>
</tr>
<tr>
<td>str -n str</td>
<td>判定字符串是否非空？str 为串，则 false。注：-n 可省略</td>
</tr>
<tr>
<td>str1 = str2/str1 == str2</td>
<td>str1 和 str2 是否相同，相同则返回 true。”==” 和”=” 等价</td>
</tr>
<tr>
<td>str1 != str2</td>
<td>str1 是否不等于 str2，若不等，则返回 true</td>
</tr>
<tr>
<td>str1 &gt; str2</td>
<td>str1 字母顺序是否大于 str2，若大于则返回 true</td>
</tr>
<tr>
<td>str1 &lt; str2</td>
<td>str1 字母顺序是否小于 str2，若小于则返回 true</td>
</tr>
</tbody>
</table></div>
<h4 id="逻辑运算符">逻辑运算符</h4>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>条件表达式</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a 或 &amp;&amp;</td>
<td>(and) 两表达式同时为 true 时才为 true。“-a” 只能在 test 或 [] 中使用，&amp;&amp; 只能在 [[]] 中使用</td>
</tr>
<tr>
<td>-o 或 ||</td>
<td>(or) 两表达式任何一个 true 则为 true。“-o” 只能在 test 或 [] 中使用，||只能在 [[]] 中使用</td>
</tr>
<tr>
<td>!</td>
<td>对表达式取反</td>
</tr>
<tr>
<td>()</td>
<td>改变表达式的优先级，为了防止被 shell 解析，应加上反斜线转义 ( )</td>
</tr>
</tbody>
</table></div>
<h3 id="if语句">if语句</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">if</span> test-commands<span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">  consequent-commands<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span><span class="k">elif</span> more-test-commands<span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">  more-consequents<span class="p">;</span><span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span><span class="k">else</span> alternate-consequents<span class="p">;</span><span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>test-commands 既可以是 test 测试或 <code>[]、[[]]</code> 测试，也可以是任何其它命令，test-commands 用于条件测试，它只判断命令的退出状态码是否为 0，为 0 则为 true。</p>
<p>例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$a</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> <span class="s1">&#39;$a&#39;</span> is not none<span class="p">;</span><span class="k">else</span> <span class="nb">echo</span> <span class="s1">&#39;$a&#39;</span> undefined or empty<span class="p">;</span><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[</span> ! -d ~/.ssh <span class="o">]</span><span class="p">;</span><span class="k">then</span>
</span></span><span class="line"><span class="cl">  mkdir ~/.ssh
</span></span><span class="line"><span class="cl">  chown -R <span class="nv">$USER</span>.<span class="nv">$USER</span> ~/.ssh
</span></span><span class="line"><span class="cl">  chmod <span class="m">700</span> ~/.ssh
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> grep <span class="s1">&#39;arturiamu&#39;</span> /etc/passwd <span class="p">&amp;</span>&gt;/dev/null<span class="p">;</span><span class="k">then</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s1">&#39;User &#34;arturiamu&#34; already exists...&#39;</span>
</span></span><span class="line"><span class="cl"><span class="k">elif</span> grep <span class="s1">&#39;mulinbiao&#39;</span> /etc/passwd <span class="p">&amp;</span>&gt;/dev/null<span class="p">;</span><span class="k">then</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s1">&#39;User &#34;mulinbiao&#34; already exists...&#39;</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s1">&#39;you should create user,exit...&#39;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="case语句">case语句</h3>
<p>case 常用于确定的分支判断。比如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">while</span> <span class="o">[</span> <span class="si">${#</span><span class="p">@</span><span class="si">}</span> -gt <span class="m">0</span> <span class="o">]</span><span class="p">;</span><span class="k">do</span>
</span></span><span class="line"><span class="cl">  <span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> in
</span></span><span class="line"><span class="cl">    start<span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="nb">echo</span> start<span class="p">;;</span>
</span></span><span class="line"><span class="cl">    stop<span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="nb">echo</span> stop
</span></span><span class="line"><span class="cl">      <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    restart<span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="nb">echo</span> restart
</span></span><span class="line"><span class="cl">      <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    reload <span class="p">|</span> force-reload<span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="nb">echo</span> reload<span class="p">;;</span>
</span></span><span class="line"><span class="cl">    status<span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="nb">echo</span> status<span class="p">;;</span>
</span></span><span class="line"><span class="cl">    *<span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="nb">echo</span> $<span class="s2">&#34;Usage: </span><span class="nv">$0</span><span class="s2"> {start|stop|status|restart|reload|force-reload}&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="nb">exit</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl">  <span class="k">esac</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>case 用法基本要求：</p>
<ul>
<li>除最后一个分支外，每个分支都以 ;; 结尾，否则出现分支穿透 (所以 ;; 不是必须的)</li>
<li>分支条件可以使用通配符号</li>
<li>分支条件中可使用竖线隔开多个条件，表示只要匹配其中之一就执行该分支</li>
<li>最后一般会定义一个能匹配其它任意条件的默认分支，即 *)</li>
</ul>
<p>下面是为 ping 命令自定义设计选项的脚本：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="cp">#!/bin/bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">while</span> <span class="o">[</span> <span class="nv">$1</span> <span class="o">]</span><span class="p">;</span><span class="k">do</span>
</span></span><span class="line"><span class="cl">  <span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> in 
</span></span><span class="line"><span class="cl">    -c<span class="p">|</span>--count<span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="nv">count</span><span class="o">=</span><span class="nv">$2</span>
</span></span><span class="line"><span class="cl">      <span class="nb">shift</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl">      <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    -t<span class="p">|</span>--timeout<span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="nv">timeout</span><span class="o">=</span><span class="nv">$2</span>
</span></span><span class="line"><span class="cl">      <span class="nb">shift</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl">      <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    -h<span class="p">|</span>--host<span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="nv">host</span><span class="o">=</span><span class="nv">$2</span>
</span></span><span class="line"><span class="cl">      <span class="nb">shift</span> <span class="m">2</span>
</span></span><span class="line"><span class="cl">      <span class="p">;;</span>
</span></span><span class="line"><span class="cl">    *<span class="o">)</span>
</span></span><span class="line"><span class="cl">      <span class="nb">echo</span> <span class="s2">&#34;wrong options or arguments&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl">  <span class="k">esac</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">ping -c <span class="nv">$count</span> -W timeout <span class="nv">$host</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>执行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ chmod +x ping.sh
</span></span><span class="line"><span class="cl">$ ./ping.sh -c <span class="m">5</span> -t <span class="m">2</span> -h blog.mulinbiao.com
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="for循环">for循环</h3>
<p>有两种 for 循环结构：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 成员测试类语法</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> i in word1 word2 ...<span class="p">;</span><span class="k">do</span> cmd_list<span class="p">;</span><span class="k">done</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># C语言for语法</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="o">((</span> expr1<span class="p">;</span>expr2<span class="p">;</span>expr3 <span class="o">))</span><span class="p">;</span><span class="k">do</span> cmd_list<span class="p">;</span><span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>成员测试类的 for 循环中，in 关键字后是使用空格分隔的一个或多个元素，for 循环时，每次从 in 关键字后面取一个元素并赋值给 i 变量。</p>
<p>例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ <span class="k">for</span> i in <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> 4<span class="p">;</span><span class="k">do</span> <span class="nb">echo</span> <span class="nv">$i</span><span class="p">;</span><span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="m">2</span>
</span></span><span class="line"><span class="cl"><span class="m">3</span>
</span></span><span class="line"><span class="cl"><span class="m">4</span>
</span></span><span class="line"><span class="cl">$ <span class="k">for</span> i in <span class="m">1</span> <span class="m">2</span> <span class="s2">&#34;3 4&#34;</span><span class="p">;</span><span class="k">do</span> <span class="nb">echo</span> <span class="nv">$i</span><span class="p">;</span><span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="m">2</span>
</span></span><span class="line"><span class="cl"><span class="m">3</span> <span class="m">4</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>C 语言型的 for 语法中，expr1 是初始化语句，expr2 是循环终点条件判断语句，expr3 是每轮循环后执行的语句，一般用来更改条件判断相关的变量。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">for</span> <span class="o">((</span><span class="nv">i</span><span class="o">=</span>1<span class="p">;</span>i&lt;<span class="o">=</span>3<span class="p">;</span>++i<span class="o">))</span><span class="p">;</span><span class="k">do</span> <span class="nb">echo</span> <span class="nv">$i</span><span class="p">;</span><span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="m">2</span>
</span></span><span class="line"><span class="cl"><span class="m">3</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="while循环">while循环</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">while</span> test_cmd_list<span class="p">;</span><span class="k">do</span> cmd_list<span class="p">;</span><span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>while 循环，开始时会测试 <code>test_cmd_list</code>，如果测试的退出状态码为 0，则执行一次循环体语句 <code>cmd_list</code>，然后再测试 <code>test_cmd_list</code>，一直循环，直到测试退出状态码非 0，循环退出。</p>
<p>例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">let</span> <span class="nv">i</span><span class="o">=</span>1,sum<span class="o">=</span>0<span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="o">[</span> <span class="nv">$i</span> -le <span class="m">10</span> <span class="o">]</span><span class="p">;</span><span class="k">do</span> 
</span></span><span class="line"><span class="cl">  <span class="nb">let</span> <span class="nv">sum</span><span class="o">=</span>sum+i
</span></span><span class="line"><span class="cl">  <span class="nb">let</span> ++i
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>还有 until 循环语句，但在 Shell 中用的很少。</p>
<p>while 循环经常会和 read 命令一起使用，read 是 Bash 的内置命令，可用来读取文件，通常会按行读取：每次读一行。</p>
<p>例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cat /etc/fstab <span class="p">|</span> <span class="k">while</span> <span class="nb">read</span> line<span class="p">;</span><span class="k">do</span>
</span></span><span class="line"><span class="cl">  <span class="nb">let</span> <span class="nv">num</span><span class="o">+=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="nv">$num</span>: <span class="nv">$line</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面的命令行中，首先 cat 进程和 while 结构开始运行，while 结构中的 read 命令从标准输入中读取，也就是从管道中读取数据，每次读取一行，因为管道中最初没有数据，所以 read 命令被阻塞处于数据等待状态。当 cat 命令读完文件所有数据后，将数据放入到管道中，于是 read 命令从管道中每次读取一行并将所读行赋值给变量 line，然后执行循环体，然后继续循环，直到 read 读完所有数据，循环退出。</p>
<p>但注意，管道两边的命令默认是在子 Shell 中执行的，所以其设置的变量在命令执行完成后就消失。换句话说，在父 Shell 中无法访问这些变量。比如上面的 num 变量是在管道的 while 结构中设置的，除了在 while 中能访问该变量，其它任何地方都无法访问它。</p>
<p>如果想要访问 while 中赋值的变量，就不能使用管道。如果是直接从文件读取，可使用输入重定向，如果是读取命令产生的数据，可使用进程替换。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">while</span> <span class="nb">read</span> line<span class="p">;</span><span class="k">do</span>
</span></span><span class="line"><span class="cl">  <span class="nb">let</span> <span class="nv">num1</span><span class="o">+=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="nv">$num1</span>: <span class="nv">$line</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span> &lt;/etc/fstab
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$num1</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="nb">read</span> line<span class="p">;</span><span class="k">do</span>
</span></span><span class="line"><span class="cl">  <span class="nb">let</span> <span class="nv">num2</span><span class="o">+=</span><span class="m">1</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="nv">$num2</span>: <span class="nv">$line</span>
</span></span><span class="line"><span class="cl"><span class="k">done</span> &lt; &lt;<span class="o">(</span>grep <span class="s1">&#39;UUID&#39;</span> /etc/fstab<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="shell函数">shell函数</h3>
<p>Shell 函数可以当作命令一样执行，它是一个或多个命令的组合结构体。通常，可以为每个功能定义一个函数，该函数中包含实现这个功能相关的所有命令和逻辑。</p>
<p>因为可以组合多个命令，并且定义之后就可以直接在当前 Shell 中调用，所以函数具有一次定义多次调用且代码复用的功能。</p>
<p>Shell 函数的定义风格有下面几种：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">function</span> func_name <span class="o">{</span>CMD_LIST<span class="o">}</span>
</span></span><span class="line"><span class="cl">func_name<span class="o">()</span> <span class="o">{</span>CMD_LIST<span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="k">function</span> func_name<span class="o">()</span> <span class="o">{</span>CMD_LIST<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>函数定义后，可以直接使用函数名来调用函数，同时还可以向函数传递零个或多个参数。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 不传递参数</span>
</span></span><span class="line"><span class="cl">func_name
</span></span><span class="line"><span class="cl"><span class="c1"># 传递多个参数</span>
</span></span><span class="line"><span class="cl">func_name arg1 arg2 arg3
</span></span></code></pre></td></tr></table>
</div>
</div><p>在函数中，那些位置变量将有特殊的意义：</p>
<ul>
<li><code>$1</code>、<code>$2</code>、<code>$3</code>&hellip;：传递给函数的第一个参数保存在 <code>$1</code> 中，第二个参数保存在 <code>$2</code> 中…</li>
<li><code>$@</code>和 <code>$*</code>：保存了所有参数，各参数使用空格分隔
<ul>
<li>不用双引号包围时，两者没区别</li>
<li>双引号包围时，<code>$@</code>的各个元素都被双引号包围，<code>$*</code> 的所有元素一次性被双引号包围</li>
</ul>
</li>
</ul>
<p>例如，定义一个函数专门用来设置和代理相关的变量：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nv">proxy_addr</span><span class="o">=</span>127.0.0.1:8118
</span></span><span class="line"><span class="cl"><span class="k">function</span> proxy_set <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="nb">local</span> <span class="nv">p_addr</span><span class="o">=</span><span class="nv">$1</span>
</span></span><span class="line"><span class="cl">  <span class="nb">export</span> <span class="nv">http_proxy</span><span class="o">=</span><span class="nv">$p_addr</span>
</span></span><span class="line"><span class="cl">  <span class="nb">export</span> <span class="nv">https_proxy</span><span class="o">=</span><span class="nv">$p_addr</span>
</span></span><span class="line"><span class="cl">  <span class="nb">export</span> <span class="nv">ftp_proxy</span><span class="o">=</span><span class="nv">$p_addr</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 调用函数</span>
</span></span><span class="line"><span class="cl">proxy_set <span class="nv">$proxy_addr</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 各代理变量已设置</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$http_proxy</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$https_proxy</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="nv">$ftp_proxy</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面在函数定义的代码中使用了 <code>local</code>，它可以用在函数内部表示定义一个局部变量，局部变量在函数执行完毕后就消失，不会影响函数外部的环境。</p>
<p>另外，函数中可以使用 return 语句来定义函数的返回值，每当执行到函数内的 return 时，函数就会终止执行，直接退出函数。在 Shell 中，函数的返回值其实就是退出状态码。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">return</span> <span class="o">[</span>N<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果不指定 N，则默认退出状态码为 0。</p>
<p>例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">function</span> sayhello <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> <span class="o">]</span> <span class="o">||</span> <span class="o">{</span> <span class="nb">echo</span> <span class="s2">&#34;give me a name please!&#34;</span><span class="p">;</span> <span class="k">return</span> 1<span class="p">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> hello <span class="nv">$1</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sayhello <span class="s2">&#34;arturia&#34;</span> <span class="p">;</span> <span class="nb">echo</span> <span class="nv">$?</span>
</span></span><span class="line"><span class="cl">sayhello <span class="s2">&#34;mu&#34;</span> <span class="p">;</span> <span class="nb">echo</span> <span class="nv">$?</span>
</span></span><span class="line"><span class="cl">sayhello <span class="p">;</span> <span class="nb">echo</span> <span class="nv">$?</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/shell/">shell</a>
        
            <a href="/tags/bash/">bash</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span> 转载需要保留原始链接，未经明确许可，禁止商业使用。  <a class="link" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"  target="_blank" rel="noopener"
    >CC BY-NC-SA 4.0</a></span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/post/shell-operation/">
        
        

        <div class="article-details">
            <h2 class="article-title">shell 运算</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/shell-bash-var/">
        
        

        <div class="article-details">
            <h2 class="article-title">Bash 变量</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/docker-container-link/">
        
        

        <div class="article-details">
            <h2 class="article-title">docker --link容器互联</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/docker-network-management/">
        
        

        <div class="article-details">
            <h2 class="article-title">docker网络管理</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/post/docker-container-base/">
        
        

        <div class="article-details">
            <h2 class="article-title">一文搞懂docker容器基础：docker镜像管理，docker容器管理</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <div id="gitalk-container"></div>
<link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css"
/>
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.18.0/js/md5.min.js"></script>
<script>
    const gitalk = new Gitalk({
        clientID: "5b878f724ec8e67e08f4",
        clientSecret: "9723d7c9b9644be68bf47cbdd6412bc895653369",
        repo: "arturiamu.github.io",
        owner: "arturiamu",
        admin: ["arturiamu"],
        distractionFreeMode: false, 
        id: md5(location.pathname), 
    });
    (function () {
        if (
            ["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1
        ) {
            document.getElementById("gitalk-container").innerHTML =
                "Gitalk comments not available by default when the website is previewed locally.";
            return;
        }
        gitalk.render("gitalk-container");
    })();
</script>



    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2023 - 
        
        2024 木林彪的个人博客
    </section>

    <section class="count_info">
        <div>
            本博客已稳定运行
            <span id="ds" class="running-days"></span>
            天
            <span id="hs" class="running-days"></span>
            小时
            <span id="ms" class="running-days"></span>
            分钟
        </div>
        <div>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            共发表 30 篇文章 · 总计 81.67 k 字
        </div>
        <div>
            <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
        </div>
    </section>
    
    <section class="powerby" style="margin-top: 7px">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.18.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


<script>
    let s1 = '2023-6-18'; 
    s1 = new Date(s1.replace(/-/g, "/"));
    let s2 = new Date();
    let timeDifference = s2.getTime() - s1.getTime();

    let days = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
    let hours = Math.floor((timeDifference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    let minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));
    document.getElementById('ds').innerHTML = days;
    document.getElementById('hs').innerHTML = hours;
    document.getElementById('ms').innerHTML = minutes;

</script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script>
    (function(u, c) {
        var d = document, t = 'script', o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) { o.addEventListener('load', function(e) { c(e); }); }
        s.parentNode.insertBefore(o, s);
    })('//cdn.bootcss.com/pangu/4.0.7/pangu.min.js', function() {
        pangu.spacingPage();
    });
</script>


<script
        src="https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/js/ribbon.min.js"
        integrity="sha384-UEK8ZiP3VgFNP8KnKMKDmd4pAUAOJ59Y2Jo3ED2Z5qKQf6HLHovMxq7Beb9CLPUe"
        crossorigin="anonymous"
        size="300"
        alpha="0.6"
        zindex="-1"
        defer
></script>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script><script>
    (function(){var w=window;if(w.ChannelIO){return w.console.error("ChannelIO script included twice.");}var ch=function(){ch.c(arguments);};ch.q=[];ch.c=function(args){ch.q.push(args);};w.ChannelIO=ch;function l(){if(w.ChannelIOInitialized){return;}w.ChannelIOInitialized=true;var s=document.createElement("script");s.type="text/javascript";s.async=true;s.src="https://cdn.channel.io/plugin/ch-plugin-web.js";var x=document.getElementsByTagName("script")[0];if(x.parentNode){x.parentNode.insertBefore(s,x);}}if(document.readyState==="complete"){l();}else{w.addEventListener("DOMContentLoaded",l);w.addEventListener("load",l);}})();

    ChannelIO('boot', {
        "pluginKey": "6145a739-ffa9-4356-8e35-875010c793ef"
    });
</script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
